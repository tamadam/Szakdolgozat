<!-- 
      ##TODO##
  Side navigation from w3schools
-->
{% load static %}
{% load user_info_tags %}

<style>
  /* The sidebar menu */
.sidenav {
  height: 100%; /* Full-height: remove this if you want "auto" height */
  width: 15%; /* Set the width of the sidebar */
  position: fixed; /* Fixed Sidebar (stay in place on scroll) */
  z-index: 1; /* Stay on top */
  top: 0; /* Stay at the top */
  left: 0;
  overflow-x: hidden; /* Disable horizontal scroll */
  padding-top: 20px;
}

/* The navigation menu links */
.sidenav a {
  padding: 6px 8px 6px 16px;
  text-decoration: none;
  font-size: 25px;
  color: black;
  background-image: url("{% static 'images/sand-background.jpg' %}");

  display: block;
  width: 50%;
}

/* When you mouse over the navigation links, change their color */
.sidenav a:hover {
  color: yellow;
  opacity: 0.5;

}

.sidebar-nav li {
  list-style-type: none;
}




/* Style page content */
.main {
  display: block;
    height: 100%;
    width: 75%;
    left: 25%;
    position: absolute;

}

#side_bar_profile_image {
  width: 60px;
  height: 60px;
}

/* On smaller screens, where height is less than 450px, change the style of the sidebar (less padding and a smaller font size) */
@media screen and (max-height: 450px) {
  .sidenav {padding-top: 15px;}
  .sidenav a {font-size: 18px;}
}
</style>

<div class="sidenav">
  <ul class="sidebar-nav">  
    <li id="user-info-li"><a href="{% url 'profile' user_id=request.user.id %}"><img src="{% static 'images/blank_profile_image.png' %}" id="side_bar_profile_image"></a>
    <span id="gold-count"></span></li>
    <li><a href="{% url 'home_page' %}">Fogadó</a></li>
    <li><a href="#">Aréna</a></li>
    <li><a href="#">Fegyverbolt</a></li>
    <li><a href="#">Varázsbolt</a></li>
    <li><a href="{% url 'profile' user_id=request.user.id %}">Karakter</a></li>
    <li><a href="{% url 'public_chat' %}">Beszélgetés</a></li>
    <li><a href="{% url 'search' %}">Hősök csarnoka</a></li>
    <li><a href="{% url 'team:user_team_view' %}">Csapat</a></li>
    <li><a href="{% url 'private_chat:private_chat_room' %}">Levelek</a></li>
    <li><a href="{% url 'logout' %}">Logout</a></li>
  </ul>
</div>

<!-- Page content 
<div class="main">
  ...
</div>-->


<script>
$( document ).ready(function() {
    var profileImagePath = "{% get_user_profile_picture request.user %}" // megkapjuk a profile imaget

    //console.log(profileImagePath)
    loadProfilePicture(profileImagePath, "side_bar_profile_image") //  betöltjük az igazi képet, alapból a default van beállítva | side_bar_profile_image az ID az img-nek

    var goldCount = "{% get_user_gold_count request.user %}"
    document.getElementById("gold-count").innerHTML = "Arany: " + goldCount

});


  function setProfilePicture(imageSource, elementId) {
    // beállítja az igazi profilképet
    let image = document.getElementById(elementId)
    image.src = imageSource
  }


  function loadProfilePicture(imageSource, profileImageId){
    // profilkép betöltését indítja el
    var profileImageLoader = new Image()
    profileImageLoader.src = imageSource

    if (!profileImageLoader.complete){
      profileImageLoader.onload = function(){
        // beállítja az alapértelmezett profilképet
        setProfilePicture(profileImageLoader.src, profileImageId)
        profileImageLoader.onload = function(){
          // pass
        }
      }
    }
    else{
      setProfilePicture(profileImageLoader.src, profileImageId)
      profileImageLoader.onload = function() {
        // pass
      }
      }
    }
 </script>